import{f as R,j as z,k as U}from"./chunk-BRFO6XPR.js";import{$a as k,Ab as f,Ba as x,Ca as y,Fa as a,Hb as V,Pa as M,R as v,W as d,X as u,cb as h,da as P,db as w,gb as O,hb as D,ib as p,jb as i,kb as o,lb as m,ob as C,pb as g,rb as _,tb as E,ub as S,vb as T,zb as c}from"./chunk-MMP6LOY2.js";var I=["previewDialog"],L=(l,t)=>t.idx;function $(l,t){if(l&1){let e=C();i(0,"tr",10),g("click",function(){let r=d(e).$implicit,s=_(2);return u(s.view(r))}),i(1,"td"),c(2),o(),i(3,"td",11),c(4),o(),i(5,"td",12),m(6,"app-svg-icon",6),o(),i(7,"td"),c(8),o(),i(9,"td",13),c(10),o(),i(11,"td",14)(12,"button",15),g("click",function(){let r=d(e).$implicit,s=_(2);return u(s.view(r))}),m(13,"app-svg-icon",6),o()(),i(14,"td",14)(15,"a",16),g("click",function(r){return d(e),u(r.stopPropagation())}),m(16,"app-svg-icon",6),o()()()}if(l&2){let e=t.$implicit;a(2),f(e.idx),a(2),f(e.title),a(2),p("name","pdf"),a(2),f(e.sizeLabel),a(2),f(e.info),a(3),p("name","preview"),a(2),p("href",e.url,x),k("download",e.info),a(),p("name","download")}}function A(l,t){if(l&1&&(i(0,"table",1)(1,"thead",8)(2,"tr")(3,"th"),c(4,"#"),o(),i(5,"th"),c(6,"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),o(),i(7,"th"),c(8,"\u0422\u0438\u043F"),o(),i(9,"th"),c(10,"\u0420\u0430\u0437\u043C\u0435\u0440"),o(),i(11,"th"),c(12,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u0430"),o(),i(13,"th"),c(14,"\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440"),o(),i(15,"th"),c(16,"\u0421\u043A\u0430\u0447\u0430\u0442\u044C"),o()()(),i(17,"tbody"),O(18,$,17,9,"tr",9,L),o()()),l&2){let e=_();a(18),D(e.rows())}}function B(l,t){l&1&&(i(0,"div",2),c(1,"\u041D\u0435\u0442 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432"),o())}function N(l,t){if(l&1&&(i(0,"section",7),m(1,"iframe",17),o()),l&2){let e=_();a(),p("src",e.safeUrl,y)}}var F=class l{sanitizer=v(z);set items(t){let e=t??[];this.rows.set(e.map((n,r)=>({idx:r+1,title:n.title,info:n.info??"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u0430",uploadedAtLabel:this.formatDate(n.uploadedAt),sizeLabel:n.sizeLabel??"\u2014",url:this.resolveUrl(n.file)})))}basePath="assets/docs/";rows=P([]);hasRows=V(()=>this.rows().length>0);selected=null;safeUrl=null;previewDialog;trackByIdx(t,e){return e.idx}view(t){this.selected=t,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.url),this.previewDialog.nativeElement.showModal(),document.body.style.overflow="hidden"}closePreview(){this.previewDialog.nativeElement.close(),document.body.style.overflow="",this.selected=null,this.safeUrl=null}download(t){let e=document.createElement("a");e.href=t.url,e.download=`${t.title}.pdf`,e.click()}resolveUrl(t){if(/^https?:\/\//i.test(t))return t;let e=t.startsWith("/")?t.slice(1):t;return e.startsWith("assets/")?e:(this.basePath.endsWith("/")?this.basePath:this.basePath+"/")+e}formatDate(t){if(!t)return"\u2014";let e=typeof t=="string"?new Date(t):t;if(isNaN(e))return String(t);let n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return`${n}.${r}.${s}`}onDialogBackdropClick(t){let e=this.previewDialog.nativeElement;t.target===e&&this.closePreview()}onDialogBackdropKey(){this.closePreview()}onDialogCancel(t){t.preventDefault(),this.closePreview()}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=M({type:l,selectors:[["app-pdf-table"]],viewQuery:function(e,n){if(e&1&&E(I,7),e&2){let r;S(r=T())&&(n.previewDialog=r.first)}},inputs:{items:"items",basePath:"basePath"},decls:10,vars:4,consts:[["previewDialog",""],[1,"files-table"],[1,"empty"],["role","dialog","aria-modal","true","tabindex","0",1,"preview",3,"click","keydown.enter","keydown.space","cancel"],[1,"title"],["type","button",1,"icon-btn-close",3,"click"],[3,"name"],[1,"content"],[1,"header-table"],[1,"table-body"],[1,"table-body",3,"click"],[1,"name"],[1,"type"],[1,"info"],[1,"action"],["type","button","title","\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C",1,"icon-btn",3,"click"],["title","\u0421\u043A\u0430\u0447\u0430\u0442\u044C",1,"icon-btn",3,"click","href"],["title","PDF preview",3,"src"]],template:function(e,n){if(e&1){let r=C();h(0,A,20,0,"table",1)(1,B,2,0,"div",2),i(2,"dialog",3,0),g("click",function(b){return d(r),u(n.onDialogBackdropClick(b))})("keydown.enter",function(){return d(r),u(n.onDialogBackdropKey())})("keydown.space",function(){return d(r),u(n.onDialogBackdropKey())})("cancel",function(b){return d(r),u(n.onDialogCancel(b))}),i(4,"header")(5,"div",4),c(6),o(),i(7,"button",5),g("click",function(){return d(r),u(n.closePreview())}),m(8,"app-svg-icon",6),o()(),h(9,N,2,1,"section",7),o()}e&2&&(w(n.hasRows()?0:1),a(6),f(n.selected==null?null:n.selected.title),a(2),p("name","close"),a(),w(n.safeUrl?9:-1))},dependencies:[R,U],styles:[".files-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.files-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .files-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;border-bottom:1px solid var(--super-light-grey-text-color)}.files-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--super-light-grey-text-color);font-weight:600;text-align:left}.files-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--super-light-grey-text-color-hover);cursor:pointer}.files-table[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{max-width:360px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.files-table[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#475569}.files-table[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{width:1%;text-align:center;white-space:nowrap}.badge.pdf[_ngcontent-%COMP%]{display:inline-block;min-width:38px;padding:2px 8px;border-radius:6px;background:#ffe8e8;color:#b00020;font-size:12px;text-align:center}.table-body[_ngcontent-%COMP%]{font-weight:var(--font-weight-light);font-size:16px}.icon-btn[_ngcontent-%COMP%]{padding:4px 6px;border:none;border-radius:6px;background:transparent;font-size:18px;line-height:1;text-decoration:none;cursor:pointer}.icon-btn[_ngcontent-%COMP%]:hover{background:#eef3f8}.empty[_ngcontent-%COMP%]{padding:20px;color:#64748b}.preview[_ngcontent-%COMP%]{width:min(1000px,90vw);height:min(80vh,800px);padding:0;border:none;border-radius:12px;overflow:hidden}.preview[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:#f9fbfd;border-bottom:1px solid #e8eef5}.preview[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600}.preview[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:calc(100% - 48px)}.preview[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border:0}.header-table[_ngcontent-%COMP%]{font-weight:var(--font-weight-thin);font-size:16px}.icon-btn-close[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.preview[_ngcontent-%COMP%]::backdrop{background:#00000080}html.no-scroll[_ngcontent-%COMP%], body.no-scroll[_ngcontent-%COMP%]{overflow:hidden}"],changeDetection:0})};export{F as a};
